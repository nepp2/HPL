

fun range(start, limit) {
  range.new(start, limit)
}

struct range_iter {
  val : i64
  limit : i64
}

fun iter(r : range) {
  range_iter.new(r.start, r.limit)
}

fun next(it : ptr(range_iter), i : ptr(i64)) {
  if it.val < it.limit {
    *i = it.val
    it.val = it.val + 1
    true
  }
  else { false }
}

let it = &range(0, 10).iter()
let i = 0;
while it.next(&i) {
  print(i); println()
}


